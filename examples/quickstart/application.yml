server:
  port:6060
  
naryo: #For a full configuration guide visit https://github.com/LF-Decentralized-Trust-labs/Naryo/blob/main/docs/configuration/configuration-core.md  
  nodes:
    - id: eadc75b2-4217-4018-95af-f67c13058976
      name: anvil
      type: ETHEREUM
      connection:
        type: HTTP
        endpoint:
          url: http://anvil:8545
        maxIdleConnections: 5
        keepAliveDuration: 5m
        connectionTimeout: 10s
        readTimeout: 30s
      subscription:
        strategy: BLOCK_BASED
        method: POLL
        interval: 5s
        initialBlock: -1
        confirmationBlocks: 12
        missingTxBlocks: 200
        eventInvalidationBlockThreshold: 2
        replayBlockOffset: 12
        syncBlockLimit: 20000
      interaction:
        strategy: BLOCK_BASED
        mode: ETHEREUM_RPC

  broadcasting:
    configuration: #the server that will receive the events
      - id: cd1bec0d-2998-46bc-828f-94459d42c17a
        type: HTTP #the destination is an HTTP server. Other supported types are KAFKA and RABBITMQ.
        endpoint:
          url: http://mock-http:7070
    broadcasters:
      - id: cd1bec0d-2998-46bc-828f-94459d43c17b
        configurationId: cd1bec0d-2998-46bc-828f-94459d42c17a #the id of the destination configuration
        target: #parameters to define what should be sent and to which specific route within the destination
          type: FILTER #only send events that are captured by a specific filter
          filterId: a5605668-7a88-4e5c-b4ee-4a8417b7184d #the specific filter id
          destinations:
            - /events #the specific endpoint whitin the HTTP server      
  filters:
    - id: a5605668-7a88-4e5c-b4ee-4a8417b7184d
      name: "my-filter"
      nodeId: eadc75b2-4217-4018-95af-f67c13058976 #the id of the configured node (see line 6)
      type: "EVENT"
      scope: "CONTRACT" 
      specification:
        signature: "HelloCounter(uint256)"
      address: ${CONTRACT_ADDRESS}

  stores:
    - nodeId: eadc75b2-4217-4018-95af-f67c13058976
      type: mongo
      features:
        - type: EVENT
          strategy: BLOCK_BASED
          targets:
            - type: BLOCK
              destination: blocks
            - type: TRANSACTION
              destination: transactions
            - type: CONTRACT_EVENT
              destination: contract-events
        - type: FILTER_SYNC
          destination: ${MONGO_STORE_FILTER_COLLECTION:filters}

spring:
  data:
    mongodb:
      uri: ${MONGO_URI}
      auto-index-creation: true